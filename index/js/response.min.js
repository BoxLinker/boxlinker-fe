/*!
 * response.js 0.9.1+201410311050
 * https://github.com/ryanve/response.js
 * MIT License (c) 2014 Ryan Van Etten
 */
!(function(a, b, c) {
  const d = a.jQuery || a.Zepto || a.ender || a.elo;
  typeof module !== 'undefined' && module.exports
    ? (module.exports = c(d))
    : (a[b] = c(d));
})(this, 'Response', function(a) {
  function b(a) {
    return a === +a;
  }
  function c(a, b) {
    return function() {
      return a.apply(b, arguments);
    };
  }
  function d(a, b) {
    const c = this.call();
    return c >= (a || 0) && (!b || b >= c);
  }
  function e(a, b, c) {
    for (var d = [], e = a.length, f = 0; e > f; )
      d[f] = b.call(c, a[f], f++, a);
    return d;
  }
  function f(a) {
    return a ? i(typeof a === 'string' ? a.split(' ') : a) : [];
  }
  function g(a, b, c) {
    if (a == null) return a;
    for (let d = a.length, e = 0; d > e; ) b.call(c || a[e], a[e], e++, a);
    return a;
  }
  function h(a, b, c) {
    b == null && (b = ''), c == null && (c = '');
    for (var d = [], e = a.length, f = 0; e > f; f++)
      a[f] == null || d.push(b + a[f] + c);
    return d;
  }
  function i(a, b, c) {
    let d,
      e,
      f,
      g = [],
      h = 0,
      i = 0,
      j = typeof b === 'function',
      k = !0 === c;
    for (e = a && a.length, c = k ? null : c; e > i; i++)
      (f = a[i]), (d = j ? !b.call(c, f, i, a) : b ? typeof f !== b : !f), d ===
        k && (g[h++] = f);
    return g;
  }
  function j(a, c) {
    if (a == null || c == null) return a;
    if (typeof c === 'object' && b(c.length)) _.apply(a, i(c, 'undefined', !0));
    else for (const d in c) cb.call(c, d) && void 0 !== c[d] && (a[d] = c[d]);
    return a;
  }
  function k(a, c, d) {
    return a == null
      ? a
      : (
          typeof a === 'object' && !a.nodeType && b(a.length)
            ? g(a, c, d)
            : c.call(d || a, a),
          a
        );
  }
  function l(a) {
    const b = T.devicePixelRatio;
    return a == null
      ? b || (l(2) ? 2 : l(1.5) ? 1.5 : l(1) ? 1 : 0)
      : isFinite(a)
        ? b && b > 0
          ? b >= a
          : (
              (a = `only all and (min--moz-device-pixel-ratio:${a})`),
              zb(a) ? !0 : zb(a.replace('-moz-', ''))
            )
        : !1;
  }
  function m(a) {
    return a.replace(tb, '$1').replace(sb, (a, b) => b.toUpperCase());
  }
  function n(a) {
    return `data-${a
      ? a.replace(tb, '$1').replace(rb, '$1-$2').toLowerCase()
      : a}`;
  }
  function o(a) {
    let b;
    return typeof a === 'string' && a
      ? a === 'false'
        ? !1
        : a === 'true'
          ? !0
          : a === 'null'
            ? null
            : a === 'undefined' || (b = +a) || b === 0 || a === 'NaN' ? b : a
      : a;
  }
  function p(a) {
    return !a || a.nodeType ? a : a[0];
  }
  function q(a, b, c) {
    let d, e, f, g, h;
    if (a.attributes)
      for (
        d = typeof c === 'boolean' ? /^data-/ : d, g = 0, h =
          a.attributes.length;
        h > g;

      )
        (f = a.attributes[g++]) &&
          (
            (e = `${f.name}`),
            (d && d.test(e) !== c) ||
              f.value == null ||
              b.call(a, f.value, e, f)
          );
  }
  function r(a) {
    let b;
    if (a && a.nodeType === 1)
      return (b = Y && a.dataset)
        ? b
        : (
            (b = {}),
            q(
              a,
              (a, c) => {
                b[m(c)] = `${a}`;
              },
              !0,
            ),
            b
          );
  }
  function s(a, b, c) {
    for (const d in b) cb.call(b, d) && c(a, d, b[d]);
  }
  function t(a, b, c) {
    if (((a = p(a)), a && a.setAttribute)) {
      if (void 0 === b && c === b) return r(a);
      const d = db(b) && n(b[0]);
      if (typeof b !== 'object' || d) {
        if (((b = d || n(b)), !b)) return;
        return void 0 === c
          ? ((b = a.getAttribute(b)), b == null ? c : d ? o(b) : `${b}`)
          : (a.setAttribute(b, (c = `${c}`)), c);
      }
      b && s(a, b, t);
    }
  }
  function u(a, b) {
    (b = f(b)), k(a, a => {
      g(b, b => {
        a.removeAttribute(n(b));
      });
    });
  }
  function v(a) {
    for (var b, c = [], d = 0, e = a.length; e > d; )
      (b = a[d++]) && c.push(`[${n(b.replace(qb, '').replace('.', '\\.'))}]`);
    return c.join();
  }
  function w(b) {
    return a(v(f(b)));
  }
  function x() {
    return window.pageXOffset || V.scrollLeft;
  }
  function y() {
    return window.pageYOffset || V.scrollTop;
  }
  function z(a, b) {
    const c = a.getBoundingClientRect ? a.getBoundingClientRect() : {};
    return (b =
      typeof b === 'number'
        ? b || 0
        : 0), { top: (c.top || 0) - b, left: (c.left || 0) - b, bottom: (c.bottom || 0) + b, right: (c.right || 0) + b };
  }
  function A(a, b) {
    const c = z(p(a), b);
    return !!c && c.right >= 0 && c.left <= Ab();
  }
  function B(a, b) {
    const c = z(p(a), b);
    return !!c && c.bottom >= 0 && c.top <= Bb();
  }
  function C(a, b) {
    const c = z(p(a), b);
    return (
      !!c && c.bottom >= 0 && c.top <= Bb() && c.right >= 0 && c.left <= Ab()
    );
  }
  function D(a) {
    let b = {
        img: 1,
        input: 1,
        source: 3,
        embed: 3,
        track: 3,
        iframe: 5,
        audio: 5,
        video: 5,
        script: 5,
      },
      c = b[a.nodeName.toLowerCase()] || -1;
    return c < 4 ? c : a.getAttribute('src') != null ? 5 : -5;
  }
  function E(a, b, c) {
    let d;
    if (!a || b == null) throw new TypeError('@store');
    return (c = typeof c === 'string' && c), k(a, a => {
      (d = c
        ? a.getAttribute(c)
        : D(a) > 0 ? a.getAttribute('src') : a.innerHTML), d == null
        ? u(a, b)
        : t(a, b, d);
    }), N;
  }
  function F(a, b) {
    const c = [];
    return a &&
      b &&
      g(
        f(b),
        b => {
          c.push(t(a, b));
        },
        a,
      ), c;
  }
  function G(a, b) {
    return typeof a === 'string' &&
      typeof b === 'function' &&
      ((fb[a] = b), (gb[a] = 1)), N;
  }
  function H(a) {
    return X.on('resize', a), N;
  }
  function I(a, b) {
    let c,
      d,
      e = wb.crossover;
    return typeof a === 'function' &&
      ((c = b), (b = a), (a = c)), (d = a ? `${a}${e}` : e), X.on(d, b), N;
  }
  function J(a) {
    return k(a, a => {
      W(a), H(a);
    }), N;
  }
  function K(a) {
    return k(a, a => {
      if (typeof a !== 'object') throw new TypeError('@create');
      let b,
        c = ub(O).configure(a),
        d = c.verge,
        e = c.breakpoints,
        f = vb('scroll'),
        h = vb('resize');
      e.length &&
        (
          (b = e[0] || e[1] || !1),
          W(() => {
            function a() {
              c.reset(), g(c.$e, (a, b) => {
                c[b].decideValue().updateDOM();
              }).trigger(i);
            }
            function e() {
              g(c.$e, (a, b) => {
                C(c[b].$e, d) && c[b].updateDOM();
              });
            }
            var i = wb.allLoaded,
              j = !!c.lazy;
            g(c.target().$e, (a, b) => {
              (c[b] = ub(c).prepareData(a)), (!j || C(c[b].$e, d)) &&
                c[b].updateDOM();
            }), c.dynamic && (c.custom || lb > b) && H(a, h), j &&
              (
                X.on(f, e),
                c.$e.one(i, () => {
                  X.off(f, e);
                })
              );
          })
        );
    }), N;
  }
  function L(a) {
    return P[Q] === N && (P[Q] = R), typeof a === 'function' && a.call(P, N), N;
  }
  if (typeof a !== 'function')
    try {
      return void console.warn('response.js aborted due to missing dependency');
    } catch (M) {}
  var N,
    O,
    P = this,
    Q = 'Response',
    R = P[Q],
    S = `init${Q}`,
    T = window,
    U = document,
    V = U.documentElement,
    W = a.domReady || a,
    X = a(T),
    Y = typeof DOMStringMap !== 'undefined',
    Z = Array.prototype,
    $ = Object.prototype,
    _ = Z.push,
    ab = Z.concat,
    bb = $.toString,
    cb = $.hasOwnProperty,
    db =
      Array.isArray ||
      function(a) {
        return bb.call(a) === '[object Array]';
      },
    eb = {
      width: [0, 320, 481, 641, 961, 1025, 1281],
      height: [0, 481],
      ratio: [1, 1.5, 2],
    },
    fb = {},
    gb = {},
    hb = { all: [] },
    ib = 1,
    jb = screen.width,
    kb = screen.height,
    lb = jb > kb ? jb : kb,
    mb = jb + kb - lb,
    nb = function() {
      return jb;
    },
    ob = function() {
      return kb;
    },
    pb = /[^a-z0-9_\-\.]/gi,
    qb = /^[\W\s]+|[\W\s]+$|/g,
    rb = /([a-z])([A-Z])/g,
    sb = /-(.)/g,
    tb = /^data-(.+)$/,
    ub =
      Object.create ||
      function(a) {
        function b() {}
        return (b.prototype = a), new b();
      },
    vb = function(a, b) {
      return (b = b || Q), `${a.replace(qb, '')}.${b.replace(qb, '')}`;
    },
    wb = { allLoaded: vb('allLoaded'), crossover: vb('crossover') },
    xb = T.matchMedia || T.msMatchMedia,
    yb = xb
      ? c(xb, T)
      : function() {
          return {};
        },
    zb = xb
      ? function(a) {
          return !!xb.call(T, a).matches;
        }
      : function() {
          return !1;
        },
    Ab = function() {
      let a = V.clientWidth,
        b = T.innerWidth;
      return b > a ? b : a;
    },
    Bb = function() {
      let a = V.clientHeight,
        b = T.innerHeight;
      return b > a ? b : a;
    },
    Cb = c(d, Ab),
    Db = c(d, Bb),
    Eb = { band: c(d, nb), wave: c(d, ob) };
  return (O = (function() {
    function b(a) {
      return typeof a === 'string' ? a.toLowerCase().replace(pb, '') : '';
    }
    function c(a, b) {
      return a - b;
    }
    let d = wb.crossover,
      k = Math.min;
    return {
      $e: 0,
      mode: 0,
      breakpoints: null,
      prefix: null,
      prop: 'width',
      keys: [],
      dynamic: null,
      custom: 0,
      values: [],
      fn: 0,
      verge: null,
      newValue: 0,
      currValue: 1,
      aka: null,
      lazy: null,
      i: 0,
      uid: null,
      reset() {
        for (var a = this.breakpoints, b = a.length, c = 0; !c && b--; )
          this.fn(a[b]) && (c = b);
        return c !== this.i &&
          (X.trigger(d).trigger(this.prop + d), (this.i = c || 0)), this;
      },
      configure(a) {
        j(this, a);
        let d,
          l,
          m,
          n,
          o,
          p = !0,
          q = this.prop;
        if (
          (
            (this.uid = ib++),
            this.verge == null && (this.verge = k(lb, 500)),
            !(this.fn = fb[q])
          )
        )
          throw new TypeError('@create');
        if (
          (
            this.dynamic == null && (this.dynamic = q.slice(0, 6) !== 'device'),
            (this.custom = gb[q]),
            (m = this.prefix ? i(e(f(this.prefix), b)) : [`min-${q}-`]),
            (n = m.length > 1 ? m.slice(1) : 0),
            (this.prefix = m[0]),
            (l = this.breakpoints),
            db(l)
          )
        ) {
          if (
            (
              g(l, a => {
                if (!a && a !== 0) throw 'invalid breakpoint';
                p = p && isFinite(a);
              }),
              p && l.sort(c),
              !l.length
            )
          )
            throw new TypeError('.breakpoints');
        } else if (((l = eb[q] || eb[q.split('-').pop()]), !l))
          throw new TypeError('.prop');
        if (
          (
            (this.breakpoints = l),
            (this.keys = h(this.breakpoints, this.prefix)),
            (this.aka = null),
            n
          )
        ) {
          for (o = [], d = n.length; d--; ) o.push(h(this.breakpoints, n[d]));
          (this.aka = o), (this.keys = ab.apply(this.keys, o));
        }
        return (hb.all = hb.all.concat((hb[this.uid] = this.keys))), this;
      },
      target() {
        return (this.$e = a(v(hb[this.uid]))), E(this.$e, S), this.keys.push(
          S,
        ), this;
      },
      decideValue() {
        for (
          var a = null, b = this.breakpoints, c = b.length, d = c;
          a == null && d--;

        )
          this.fn(b[d]) && (a = this.values[d]);
        return (this.newValue =
          typeof a === 'string' ? a : this.values[c]), this;
      },
      prepareData(b) {
        if (
          (
            (this.$e = a(b)),
            (this.mode = D(b)),
            (this.values = F(this.$e, this.keys)),
            this.aka
          )
        )
          for (let c = this.aka.length; c--; )
            this.values = j(this.values, F(this.$e, this.aka[c]));
        return this.decideValue();
      },
      updateDOM() {
        return this.currValue === this.newValue
          ? this
          : (
              (this.currValue = this.newValue),
              this.mode > 0
                ? this.$e[0].setAttribute('src', this.newValue)
                : this.newValue == null
                  ? this.$e.empty && this.$e.empty()
                  : this.$e.html
                    ? this.$e.html(this.newValue)
                    : (
                        this.$e.empty && this.$e.empty(),
                        (this.$e[0].innerHTML = this.newValue)
                      ),
              this
            );
      },
    };
  })()), (fb.width = Cb), (fb.height = Db), (fb['device-width'] = Eb.band), (fb['device-height'] = Eb.wave), (fb['device-pixel-ratio'] = l), (N = {
    deviceMin() {
      return mb;
    },
    deviceMax() {
      return lb;
    },
    noConflict: L,
    create: K,
    addTest: G,
    datatize: n,
    camelize: m,
    render: o,
    store: E,
    access: F,
    target: w,
    object: ub,
    crossover: I,
    action: J,
    resize: H,
    ready: W,
    affix: h,
    sift: i,
    dpr: l,
    deletes: u,
    scrollX: x,
    scrollY: y,
    deviceW: nb,
    deviceH: ob,
    device: Eb,
    inX: A,
    inY: B,
    route: k,
    merge: j,
    media: yb,
    mq: zb,
    wave: Db,
    band: Cb,
    map: e,
    each: g,
    inViewport: C,
    dataset: t,
    viewportH: Bb,
    viewportW: Ab,
  }), W(() => {
    let b = t(U.body, 'responsejs'),
      c = (T.JSON && JSON.parse) || a.parseJSON;
    (b = b && c ? c(b) : b), b &&
      b.create &&
      K(b.create), (V.className = `${V.className.replace(
      /(^|\s)(no-)?responsejs(\s|$)/,
      '$1$3',
    )} responsejs `);
  }), N;
});
